{% extends "annasebba/base.html" %}
{% block title %}{{ request.tenant.name }} – Conteúdo + Produtos{% endblock %}

{% block hero %}
<section class="hero-bg text-white py-20 md:py-32">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h1 class="text-4xl md:text-6xl font-extrabold font-serif leading-tight">
      Trabalhando por um futuro mais justo.
    </h1>
    <p class="mt-4 text-lg md:text-xl max-w-3xl mx-auto text-gray-200">
      Acompanhe meu trabalho, minhas propostas e as ações que estamos tomando para construir uma cidade melhor para todos.
    </p>
    <a href="#conteudo" class="mt-8 inline-block btn-accent font-bold text-lg py-4 px-10 rounded-lg">
      Conheça minhas ideias
    </a>
  </div>
</section>
{% endblock %}

{% block content %}
<section id="sobre" class="bg-white py-16 md:py-24 rounded-2xl">
  <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row items-center gap-10">
    <div class="md:w-1/3 text-center">
      <img src="https://placehold.co/300x300/0D2B4F/F7F2E9?text=Jo%C3%A3o+Silva"
           alt="Foto de João Silva"
           class="rounded-full w-60 h-60 mx-auto object-cover shadow-lg">
    </div>
    <div class="md:w-2/3">
      <h2 class="text-4xl font-bold font-serif">Minha Missão</h2>
      <p class="mt-4 text-lg text-[#3E5A7B]">
        Acredito que a política é a ferramenta mais poderosa para a transformação social. Minha carreira é dedicada a lutar por mais oportunidades, justiça e dignidade para cada cidadão. Com transparência e muito trabalho, quero representar os verdadeiros interesses da nossa gente e construir soluções para os desafios que enfrentamos.
      </p>
    </div>
  </div>
</section>

<section id="conteudo" class="py-16 md:py-24">
  <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold font-serif">Mandato em Ação</h2>
            <p class="mt-4 max-w-2xl mx-auto text-lg text-[#3E5A7B]">
                Aqui você encontra as últimas notícias, projetos e debates do nosso mandato.
            </p>
        </div>
        <div class="bg-white p-6 md:p-8 rounded-2xl shadow-lg flex flex-col md:flex-row gap-8 items-center card-hover">
            <img
                src="{% if post and post.cover_image %}{{ post.cover_image.url }}{% else %}https://placehold.co/600x400/0D2B4F/F7F2E9?text=Post+em+Destaque{% endif %}"
                alt="{% if post %}{{ post.title }}{% else %}Imagem do post em destaque{% endif %}"
                class="w-full md:w-1/2 h-auto object-cover rounded-xl"
            >
            <div class="md:w-1/2">
                <span class="text-sm font-bold text-[#E87A4F]">Destaque</span>
                <h3 class="text-3xl font-bold font-serif mt-2">
                {% if post %}{{ post.title }}{% else %}Sem post em destaque{% endif %}
                </h3>
                <p class="mt-4 text-base text-[#3E5A7B]">
                {% if post and post.summary %}{{ post.summary }}{% elif post %}{{ post.content|truncatechars:180 }}{% else %}Publique um conteúdo marcado como destaque para ocupar este espaço.{% endif %}
                </p>
                {% if post %}
                
               
                <a href="{% url 'post_detail' pk=post.id slug=post.slug %}"  class="mt-6 inline-block btn-accent font-bold py-3 px-6 rounded-lg">
                    Leia o post completo
                </a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="mt-16">
      <h3 class="text-3xl font-bold font-serif text-center mb-10">Outros Posts</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

        {% for p in posts %}
          <div class="bg-white rounded-2xl shadow-lg overflow-hidden card-hover">
            {% if p.cover_image %}
              <img src="{{ p.cover_image.url }}" alt="{{ p.title }}" class="w-full h-48 object-cover">
            {% else %}
              <img src="https://placehold.co/400x250/3E5A7B/FFFFFF?text=Notícia" alt="{{ p.title }}" class="w-full h-48 object-cover">
            {% endif %}
            <div class="p-6">
              {# Se tiver categoria, troque aqui; senão tira essa linha ou use algo padrão #}
              {# <span class="text-sm font-bold text-[#E87A4F]">{{ p.category.name }}</span> #}
              <span class="text-sm font-bold text-[#E87A4F]">NOTÍCIA</span>

              <h4 class="text-xl font-bold font-serif mt-2">
                <a href="{% url 'post_detail' pk=p.id slug=p.slug %}" class="hover:underline">
                  {{ p.title }}
                </a>
              </h4>

              <p class="mt-2 text-sm text-[#3E5A7B]">
                {{ p.summary|default:p.title }}
              </p>

              <a href="{% url 'post_detail' pk=p.id slug=p.slug %}" class="mt-4 inline-block font-bold text-[#E87A4F] hover:underline">
                Saiba mais &rarr;
              </a>
            </div>
          </div>
        {% empty %}
          <p class="text-center text-sm text-[#3E5A7B]">Nenhuma notícia encontrada.</p>
        {% endfor %}

      </div>
</div>
  </div>
</section>

<section id="newsletter" class="section-accent py-16 md:py-20 rounded-2xl">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h2 class="text-4xl font-bold font-serif">Receba minhas atualizações</h2>
    <p class="mt-4 max-w-2xl mx-auto text-lg">
      Cadastre seu e-mail para receber em primeira mão as notícias do nosso mandato, agenda e convites para eventos.
    </p>
    <form class="mt-8 max-w-xl mx-auto flex flex-col sm:flex-row gap-4" method="post" action="{% url 'newsletter_subscribe' %}">
      {% csrf_token %}
      <input type="email" name="email" placeholder="Digite seu melhor e-mail"
             class="w-full px-5 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-white" required>
      <button type="submit" class="bg-[#0D2B4F] text-white font-bold py-3 px-8 rounded-lg hover:bg-[#1a4a8a] transition-colors">
        Inscrever-se
      </button>
    </form>
  </div>
</section>
{% endblock %}